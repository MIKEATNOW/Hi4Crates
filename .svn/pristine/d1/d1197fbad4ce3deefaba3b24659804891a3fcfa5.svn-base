package kr.or.ddit.service.impl;

import java.util.List;

import javax.inject.Inject;

import org.springframework.stereotype.Service;

import kr.or.ddit.mapper.IPhysicalMapper;
import kr.or.ddit.service.IPhysicalService;
import kr.or.ddit.vo.MemberVO;
import kr.or.ddit.vo.OrderVO;
import lombok.extern.slf4j.Slf4j;

@Service
@Slf4j
public class PhysicalServiceImpl implements IPhysicalService {

	@Inject
	private IPhysicalMapper physicalMapper;
	
	@Override
	public List<MemberVO> getPhysicalWaitingList() {
		log.info("[서비스][getPhysicalWaitingList] 실행!");
		return physicalMapper.selectPhysicalWaitingList();
	}

	@Override
	public MemberVO getPhysicalOrder(
			int memNo
			) {
		log.info("[서비스][getPhysicalOrder] 실행!");
		return physicalMapper.selectPhysicalOrder(memNo);
	}

	@Override
	public String getDoctorsName(
			MemberVO memOrderInfo
			) {
		log.info("[서비스][getDoctorsName] 실행!");
		List<OrderVO> orderList = memOrderInfo.getOrderList();
		log.info("[서비스][getDoctorsName] orderList?" + orderList);
		MemberVO memberVO = new MemberVO();
		String docName = "";
		
		if (orderList != null && !orderList.isEmpty()) {
			int empNo = orderList.get(0).getEmpNo();
			int orderNo = orderList.get(0).getOrderNo();
			log.info("[서비스][getDoctorsName] empNo: " + empNo + " | orderNo: " + orderNo);
			memOrderInfo.setEmpNo(empNo);
			memOrderInfo.setOrderNo(orderNo);
			memberVO = physicalMapper.selectDocName(memOrderInfo);
			docName = memberVO.getDocName();
			log.info("[서비스][getDoctorsName] docName: " + docName);
			return docName;
		} else {
			return null;
		}
	}

//	@Override
//	public String getDoctorsName(int empNo, int orderNo) {
//		log.info("[서비스][getDoctorsName] 실행!");
//		log.info("[서비스][getDoctorsName] empNo: " + empNo);
//		log.info("[서비스][getDoctorsName] orderNo: " + orderNo);
//		return physicalMapper.selectDocName(empNo, orderNo);
//	}

}
