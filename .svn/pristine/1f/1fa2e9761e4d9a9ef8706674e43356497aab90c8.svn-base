<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
  <script src="${pageContext.request.contextPath }/resources/assets/js/customValid.js"></script>
  <script src="${pageContext.request.contextPath }/resources/assets/js/show-password.js"></script>
    <!-- Start::app-content -->
    <div class="main-content app-content">
        <div class="container-fluid">
            <div class="d-md-flex d-block align-items-center justify-content-between my-4 page-header-breadcrumb">
                <h1 class="page-title fw-semibold fs-18 mb-0">마이 페이지</h1>
                <div class="ms-md-1 ms-0">
                        <nav>
                            <ol class="breadcrumb mb-0">
                                <li class="breadcrumb-item"><a href="javascript:void(0);">마이페이지</a></li>
                                <li class="breadcrumb-item active" aria-current="page">내 정보</li>
                            </ol>
                        </nav>
                    </div>
                </div>
                <!-- Page Header Close -->

                <!-- Start::row-1 -->
                <div class="row g-2">
                    <div class="col-xxl-4 col-xl-12">
                        <div class="card custom-card overflow-hidden">
                            <div class="card-body p-0">
                                <div class="d-sm-flex align-items-top p-4 border-bottom-0 main-profile-cover">
                                    <div>
                                        <span class="avatar avatar-xxl avatar-rounded online me-3">
                                        	<c:set value="${member.fileVO.attachLoc}${member.fileVO.attachPath}${member.fileVO.attachName }" var="target"/>
                                            <img src="/file/displayFile?fileName=${target}" alt="">
                                        </span>
                                    </div>
                                    <div class="flex-fill main-profile-info">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <h6 class="fw-semibold mb-1 text-fixed-white">${member.memName }</h6>
                                            <span class="badge rounded-pill bg-success" style="font-size: 12px; margin-left: 15px;">근무중</span>
                                            <!-- <span class="badge rounded-pill bg-light" style="font-size: 12px; margin-left: 15px;"><span style="color: black;">퇴근</span></span> -->
                                        </div>
                                        <p class="mb-1 text-muted text-fixed-white op-7">${member.empVO.empJob }</p>
                                        <p class="fs-12 text-fixed-white mb-4 op-5">  
                                            <span class="me-3"><i class="ri-building-line me-1 align-middle"></i>${member.memPostcode }</span> 
                                            <span><i class="ri-map-pin-line me-1 align-middle"></i>${member.memAddress1 }</span> 
                                        </p>
                                        <button type="button" class="btn btn-light rounded-pill btn-wave" style="width: 85px;"><i class='bx bx-log-in' style="margin-right: 10px;"></i>출근</button>
                                        <button type="button" class="btn btn-light rounded-pill btn-wave" style="margin-left: 20px; width: 85px;"><i class='bx bx-log-out' style="margin-right: 10px;"></i> 퇴근</button>
                                    </div>
                                </div>
                                <!-- 자기소개 -->
                                <!-- <div class="p-4 border-bottom border-block-end-dashed">
                                    <div class="mb-4">
                                        <p class="fs-15 mb-2 fw-semibold">Professional Bio :</p>
                                        <p class="fs-12 text-muted op-7 mb-0">
                                            I am <b class="text-default">Sonya Taylor,</b> here by conclude that,i am the founder and managing director of the prestigeous company name laugh at all and acts as the cheif executieve officer of the company.
                                        </p>
                                    </div>   
                                    <div class="mb-0">
                                        <p class="fs-15 mb-2 fw-semibold">Links :</p>
                                        <div class="mb-0">
                                            <p class="mb-1">
                                                <a href="https://www.spruko.com/" class="text-primary"><u>https://www.spruko.com/</u></a>
                                            </p>
                                            <p class="mb-0">
                                                <a href="https://themeforest.net/user/spruko/portfolio" class="text-primary"><u>https://themeforest.net/user/spruko/portfolio</u></a>
                                            </p>
                                        </div>
                                    </div>
                                </div>   -->

                                <div class="p-4 border-bottom border-block-end-dashed">
                                    <p class="fs-15 mb-2 me-4 fw-semibold">개인 정보 :</p>
                                    <div class="text-muted">
                                        <p class="mb-2">
                                            <span class="avatar avatar-sm avatar-rounded me-2 bg-light text-muted">
                                                <i class="ri-mail-line align-middle fs-14"></i>
                                            </span>
                                            ${member.memEmail }
                                        </p>
                                        <p class="mb-2">
                                            <span class="avatar avatar-sm avatar-rounded me-2 bg-light text-muted">
                                                <i class="ri-phone-line align-middle fs-14"></i>
                                            </span>
                                            ${member.memTel }
                                        </p>
                                        <p class="mb-0">
                                            <span class="avatar avatar-sm avatar-rounded me-2 bg-light text-muted">
                                                <i class="ri-map-pin-line align-middle fs-14"></i>
                                            </span>
                                            ${member.memAddress1 }, ${member.memAddress2 }
                                        </p>
                                    </div>
                                </div>
                                <!-- 소셜 -->
                                <!-- <div class="p-4 border-bottom border-block-end-dashed d-flex align-items-center">
                                    <p class="fs-15 mb-2 me-4 fw-semibold">Social Networks :</p>
                                    <div class="btn-list mb-0">
                                        <button class="btn btn-sm btn-icon btn-primary-light btn-wave waves-effect waves-light">
                                            <i class="ri-facebook-line fw-semibold"></i>
                                        </button>
                                        <button class="btn btn-sm btn-icon btn-secondary-light btn-wave waves-effect waves-light">
                                            <i class="ri-twitter-x-line fw-semibold"></i>
                                        </button>
                                        <button class="btn btn-sm btn-icon btn-warning-light btn-wave waves-effect waves-light">
                                            <i class="ri-instagram-line fw-semibold"></i>
                                        </button>
                                        <button class="btn btn-sm btn-icon btn-success-light btn-wave waves-effect waves-light">
                                            <i class="ri-github-line fw-semibold"></i>
                                        </button>
                                        <button class="btn btn-sm btn-icon btn-danger-light btn-wave waves-effect waves-light">
                                            <i class="ri-youtube-line fw-semibold"></i>
                                        </button>
                                    </div>
                                </div> -->

                                <div class="p-4 border-bottom border-block-end-dashed">
                                    <p class="fs-15 mb-2 me-4 fw-semibold">분야 :</p>
                                    <div>
                                    	<c:forEach var="realm" items="${member.realmList }">
                                            <span class="badge bg-light text-muted m-1 fs-12">${realm.realmName }</span>
                                    	</c:forEach>
                                    </div>
                                </div>
                                <div class="p-4 border-bottom border-block-end-dashed">
                                    <p class="fs-15 mb-2 me-4 fw-semibold">경력 :</p>
                                    <div>
                                    	<c:forEach var="career" items="${careerList }">
                                    		<p class="mb-2">
                                            <span class="avatar avatar-sm avatar-rounded me-2 bg-light text-muted">
                                                <i class='bx bxs-user-badge fs-14'></i>
                                            </span>
                                            ${career.careerName }
                                        </p>
                                    	</c:forEach>
                                    </div>
                                </div>
                                
                                <div class="p-4 border-bottom border-block-end-dashed">
                                    <p class="fs-15 mb-2 me-4 fw-semibold">연가 :</p>
                                    <div class="table-responsive">
                                        <table class="table text-nowrap table-striped">
                                            <thead>
                                                <tr>
                                                    <th scope="col">총 연가일</th>
                                                    <th scope="col">사용 연가일</th>
                                                    <th scope="col">잔여 연가일</th>
                                                    <th scope="col">연가 신청</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr >
                                                    <th scope="row"><span style="float: right;">15일</span></th>
                                                    <td><span style="float: right;">${15-member.empVO.empVacation }일</span></td>
                                                    <td><span style="float: right;">${member.empVO.empVacation}일</span></td>
                                                    <td>
                                                        <button class="btn btn-success-light rounded-pill label-btn">
                                                            <i class="ri-chat-smile-line label-btn-icon me-2"></i>
                                                            신청
                                                        </button>
                                                    </td>
                                                </tr>
                                                
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                
                                <!-- 팔로워 리스트 -->

                                <!-- <div class="p-4">
                                    <p class="fs-15 mb-2 me-4 fw-semibold">Followers :</p>
                                    <ul class="list-group">
                                        <li class="list-group-item">
                                            <div class="d-sm-flex align-items-top">
                                                <span class="avatar avatar-sm">
                                                    <img src="${pageContext.request.contextPath }/resources/assets/images/faces/1.jpg" alt="img">
                                                </span>
                                                <div class="ms-sm-2 ms-0 mt-sm-0 mt-1 fw-semibold flex-fill">
                                                    <p class="mb-0 lh-1">Alicia Sierra</p>
                                                    <span class="fs-11 text-muted op-7">aliciasierra389@gmail.com</span>
                                                </div>
                                                <button class="btn btn-light btn-wave btn-sm">Follow</button>
                                            </div>
                                        </li>
                                    </ul>
                                </div> -->

                            </div>
                        </div>
                    </div>
                    <div class="col-xxl-8 col-xl-12">
                            <div class="col-xl-12">
                                <div class="card custom-card">
                                    <!-- <div class="col-xl-12"> -->
                                        <!-- <div class="card custom-card"> -->
                                            <div class="card-body">
                                                <ul class="nav nav-tabs mb-3 border-0" role="tablist">
                                                    <li class="nav-item">
                                                        <a class="nav-link active" data-bs-toggle="tab" role="tab" href="#home1"
                                                            aria-selected="true">정보 조회</a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link" data-bs-toggle="tab" role="tab" href="#about1" aria-selected="false">정보 수정</a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link" data-bs-toggle="tab" role="tab" href="#service1"
                                                            aria-selected="false">정보 삭제</a>
                                                    </li>
                                                </ul>
                                                <div class="tab-content">
                                                    <div class="tab-pane show active text-muted" id="home1" role="tabpanel">
                                                    <!-- <div class="card-header">
                                                        <div class="card-title">
                                                            내 정보
                                                        </div>
                                                    </div> -->
                                                        <ul class="list-group">
                                                            <li class="list-group-item">
                                                                <div class="d-flex flex-wrap align-items-center">
                                                                    <div class="me-2 fw-semibold">
                                                                        아이디 :
                                                                    </div>
                                                                    <span class="fs-12 text-muted">${member.memId }</span>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <div class="d-flex flex-wrap align-items-center">
                                                                    <div class="me-2 fw-semibold">
                                                                        이메일 :
                                                                    </div>
                                                                    <span class="fs-12 text-muted">${member.memEmail }</span>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <div class="d-flex flex-wrap align-items-center">
                                                                    <div class="me-2 fw-semibold">
                                                                        이름 :
                                                                    </div>
                                                                    <span class="fs-12 text-muted">${member.memName }</span>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <div class="d-flex flex-wrap align-items-center">
                                                                    <div class="me-2 fw-semibold">
                                                                        나이 :
                                                                    </div>
                                                                    <span class="fs-12 text-muted">${member.memAge }</span>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <div class="d-flex flex-wrap align-items-center">
                                                                    <div class="me-2 fw-semibold">
                                                                        성별 :
                                                                    </div>
                                                                    <span class="fs-12 text-muted">${member.memGender }</span>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <div class="d-flex flex-wrap align-items-center">
                                                                    <div class="me-2 fw-semibold">
                                                                        주민번호 :
                                                                    </div>
                                                                    <span class="fs-12 text-muted">${member.memRegno1 }-${member.memRegno2}</span>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <div class="d-flex flex-wrap align-items-center">
                                                                    <div class="me-2 fw-semibold">
                                                                        주소 :
                                                                    </div>
                                                                    <span class="fs-12 text-muted">${member.memAddress1 }, ${member.memAddress2 }</span>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <div class="d-flex flex-wrap align-items-center">
                                                                    <div class="me-2 fw-semibold">
                                                                        사번 :
                                                                    </div>
                                                                    <span class="fs-12 text-muted">${member.empVO.empNo }</span>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <div class="d-flex flex-wrap align-items-center">
                                                                    <div class="me-2 fw-semibold">
                                                                        직무 :
                                                                    </div>
                                                                    <span class="fs-12 text-muted">${member.empVO.empJob }</span>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <div class="d-flex flex-wrap align-items-center">
                                                                    <div class="me-2 fw-semibold">
                                                                        면허번호 :
                                                                    </div>
                                                                    <span class="fs-12 text-muted">${member.empVO.empLicence }</span>
                                                                </div>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <div class="d-flex flex-wrap align-items-center">
                                                                    <div class="me-2 fw-semibold">
                                                                        입사일 :
                                                                    </div>
                                                                    <span class="fs-12 text-muted">${member.empVO.empHireDate }</span>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div class="tab-pane text-muted" id="about1" role="tabpanel">
                                                        <form action=""  enctype="multipart/form-data">
                                                            <div class="row gy-4">
                                                                <div class="col-xl-12">
                                                                    <span class="avatar avatar-xxl avatar-rounded me-3" style="margin-left: 40%; height: 10rem; width: 10rem;">
                                                                        <img id="imgBox" src="/file/displayFile?fileName=${target}" alt="">
                                                                    </span><br>
                                                                </div>
                                                                <div class="col-12">
                                                                    <label for="input-label" class="form-label" >프로필사진</label>
                                                                    <input type="file" class="form-control" style="width: 50%;" id="file" name="file" value="${member.file }">
                                                                </div>
                                                                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                                                                <label for="input-label" class="form-label" >아이디</label>
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control" id="memId" name="memId" value="${member.memId }">
                                                                    <input type="button" class="btn btn-light" id="checkId" value="중복체크">
                                                                </div>
                                                                <div class="invalid-feedback" id="invalid-id">*영어와 숫자를 사용한 4~16자리의 아이디를 입력해주세요!</div>
                                                                <div class="valid-feedback" id="valid-id"></div>
                                                            </div>
                                                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 ">
                                                                <label for="input-label" class="form-label">비밀번호</label>
                                                                <div class="input-group">
                                                                <input type="password" class="form-control" id="memPw" name="memPw" value="">
                                                                <button class="btn btn-light"
                                                                    onclick="createpassword('memPw',this)" type="button"
                                                                    id="button-addon1">
                                                                    <i class="ri-eye-off-line align-middle"></i>
                                                                </button>
                                                                <div class="invalid-feedback" id="invalid-pw">*4~10자리 영어, 숫자, 특수문자를 포함하여 입력하여주세요!</div>
                                                            </div>
                                                            </div>
                                                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                                                                <label for="input-label" class="form-label" >이름</label>
                                                                 <input type="text" class="form-control" id="memName" name="memName" value="${member.memName }">
                                                                 <div class="invalid-feedback" id="invalid-name">*한글로 이루어진 이름을 입력해주세요!</div>
                                                             </div>
                                                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                                                                <label for="input-label" class="form-label" >전화번호</label>
                                                                 <input type="text" class="form-control" id="memTel" name="memTel" value="${member.memTel }">
                                                                 <div class="invalid-feedback" id="invalid-tel">*010-1234-5678 형식으로 입력해주세요</div>
                                                             </div>
                                                             <div class="col-xl-8 col-lg-6 col-md-6 col-sm-12">
                                                                <label for="input-email" class="form-label">이메일</label>
                                                                <div class="input-group">
                                                                    <input type="email" class="form-control" id="memEmail" name="memEmail" value="${member.memEmail }">
                                                                    <input type="button" class="btn btn-light" id="checkEmail" value="인증번호 전송">
                                                                </div>
                                                                <div class="invalid-feedback" id="invalid-email">*이메일 형식이 올바르지 않습니다!</div>
                                                            </div>

                                                            <div class="col-xl-4" style="display: none;" id="emailAuth">
                                                                <label for="signup-email" class="form-label text-default">인증번호 입력</label>
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control form-control-lg"
                                                                        id="authNo"  placeholder="인증번호">
                                                                    <input type="button" class="btn btn-light" id="emailAuthBtn" value="입력">
                                                                    <div class="invalid-feedback" id="invalid-emailAuth">*인증번호가 일치하지 않습니다!</div>
                                                                </div>
                                                            </div>
                                                            <div class="input-group">
                                                                <input type="text" class="form-control form-control-lg"
                                                                    id="memPostcode" name="memPostcode" placeholder="우편번호" value="${member.memPostcode }">
                                                                    <button type="button" class="btn btn-secondary btn-flat" onclick="DaumPostCode()">우편번호 찾기</button>
                                                                    <div class="invalid-feedback" id="invalid-postcode">*주소를 선택해주세요!</div>
                                                                </div>
                                                                <div class="col-xl-12">
                                                                <label for="signup-add" class="form-label text-default">주소
                                                                    선택</label> <input type="text" class="form-control form-control-lg"
                                                                    id="memAddress1" name="memAddress1" value="${member.memAddress1 }">
                                                                    <div class="invalid-feedback" id="invalid-address1" >*주소를 선택해주세요!</div>
                                                                </div>
                                                            <div class="col-xl-12">
                                                                <label for="signup-add2" class="form-label text-default">상세
                                                                    주소</label> <input type="text" class="form-control form-control-lg"
                                                                    id="memAddress2" name="memAddress2"
                                                                    value="${member.memAddress2 }">
                                                                    <div class="invalid-feedback" id="invalid-address2">*상세주소를 입력해주세요!</div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-2 d-grid mt-2" style="float: right;">
                                                                <input type="button" class="btn btn-lg btn-primary"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#exampleModal"   value="정보 수정">
                                                            </div>
                                                        </form>
                                                    </div>
                                                    <div class="tab-pane text-muted" id="service1" role="tabpanel">
                                                        There are many variations of passages of <b>Lorem Ipsum available</b>, but the
                                                        majority have suffered alteration in some form, by injected humour, or
                                                        randomised words which don't look even slightly believable. If you are going to
                                                        use a passage of Lorem Ipsum, you need to be sure there isn't anything.
                                                    </div>
                                                </div>
                                            </div>
                                        <!-- </div> -->
                                    <!-- </div> -->

                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End::app-content -->



    <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal"
        data-bs-target="#exampleModal">
        Launch demo modal
    </button>

    <div class="modal fade" id="exampleModal" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h6 class="modal-title" id="exampleModalLabel1">Modal title</h6>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-3 align-items-center">
                        <div class="col-auto">
                            <label for="inputPassword6" class="col-form-label">Password</label>
                        </div>
                        <div class="col-auto">
                            <input type="password" id="inputPassword6" class="form-control"
                                aria-describedby="passwordHelpInline">
                        </div>
                        <div class="col-auto">
                            <span id="passwordHelpInline" class="form-text">
                                Must be 8-20 characters long.
                            </span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                        data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save
                        changes</button>
                </div>
            </div>
        </div>
    </div> -->




   <!-- 알럿 모달 --> 
<div class="modal fade" id="exampleModal" tabindex="-1"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
                <div class="col-xxl-12 col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                    <div class="card bg-white border-0">
                        <div class="alert custom-alert1 alert-warning" >
                            <div class="text-center px-5 pb-0" style="margin-top: 50px">
                                <svg class="custom-alert-icon svg-warning" xmlns="http://www.w3.org/2000/svg" height="1.5rem" viewBox="0 0 24 24" width="1.5rem" fill="#000000"><path d="M0 0h24v24H0z" fill="none"/><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>
                                <h5>주의</h5>
                                <p class="">정말로 개인정보를 수정하시겠습니까?</p>
                                    <button class="btn btn-sm btn-outline-secondary m-1" data-bs-dismiss="modal">취소</button>
                                    <button class="btn btn-sm btn-warning m-1" id="modifyBtn">수정</button>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>
</div>



            
    <script>
        $(function(){
            var memAddress2 = $("#memAddress2");
			//카카오맵 api 사용 자원들
			var mapContainer = null;
			var map = null;
			var geocoder = null;


            var authCode;
			
            file.on("change",function(){
				var files = event.target.files;
				var file = files[0];
				console.log(file);
								
				var formData = new FormData();
				formData.append("file", file);
				
				$.ajax({
					url : "/file/uploadAjax",
					type : "post",
					data : formData,
					dataType : "text",
					processData : false,
					contentType : false,
					success : function(data){
						console.log(data);
						if(checkImageType(data)){
							imgBox.attr("src", "/file/displayFile?fileName="+getThumbnailName(data));
							signupForm.append("<input type='hidden' value='"+data+"' name='imgData' />")
						}
					}
				});
			});
				
            });
            
            
			// 이름 검증
			$('#memName').on('blur',function(){
				memName = $('#memName').val();
			    if(validateName(memName)) {
			        $('#memName').removeClass('is-invalid');
			        $('#memName').addClass("is-valid");
			    }
			    else if(!validateName(memName)){
			        $('#memName').removeClass('is-valid');
			        $('#memName').addClass("is-invalid");
			}
			});
			
			// 아이디 검증
			$('#memId').on('blur',function(){
				memId = $('#memId').val();
			    if(validateUsername(memId)) {
			        $('#memId').removeClass('is-invalid');
			        $('#memId').addClass("is-valid");
			    }
			    else if(!validateUsername(memId)){
			        $('#memId').removeClass('is-valid');
			        $('#memId').addClass("is-invalid");
			}
			});
			
			$('#checkId').on("click",function(){
				let checkId = $('#memId').val();
				let data = {
						"checkId" : checkId
				};
				$.ajax({
					url : "/public/idChk.do",
					type : "post",
					data : JSON.stringify(data),
					contentType : "application/json; charset=utf-8",
					success : function(result){
						console.log(result);
						if(result === "OK") {
					        $('#memId').removeClass('is-invalid');
					        $('#memId').addClass("is-valid");
					       	$('#valid-id').html("*사용 가능한 아이디입니다 !");
						}
						
						if(result === "FAILED") {
					        $('#memId').removeClass('is-valid');
					        $('#memId').addClass("is-invalid");
							$('#invalid-id').html("*중복된 아이디가 존재합니다 !");
						}
					}
				});
			});
			
			// 비밀번호 정규식 검증
			$('#memPw').on('blur',function(){
				var memPw = $('#memPw').val();
			    if(validatePassword(memPw)) {
			        $('#memPw').removeClass('is-invalid');
			        $('#memPw').addClass("is-valid");
			    }
			    else if(!validatePassword(memPw)){
			        $('#memPw').removeClass('is-valid');
			        $('#memPw').addClass("is-invalid");
			}
			});
			
			
			// 이메일 검증
			$('#checkEmail').on("click",function(){
				var memEmail = $('#memEmail').val();
			    if(validateEmail(memEmail)) {
			        $('#memEmail').removeClass('is-invalid');
			        $('#memEmail').addClass("is-valid");

			    }
			    else if(!validateEmail(memEmail)){
			        $('#memEmail').removeClass('is-valid');
			        $('#memEmail').addClass("is-invalid");
			        return;
			    }
				let obj = { "email" : memEmail};
				$.ajax({
					url : "/public/emailAuth",
					data : JSON.stringify(obj),
					type : "POST",
					contentType : "application/json;charset=utf-8",
					success:function(res){
						console.log("result : "+res);
						authCode = res;
					}
				});
				$('#emailAuth').css('display', 'block');
			});
		
			// 이메일 인증번호 확인
			$('#emailAuthBtn').on('click',function(){
				let authNo = $('#authNo').val();	
				console.log(authNo);
				console.log(authCode);
				if(authNo === authCode.toString() ) {
					$('#authNo').prop("disabled",true);
					$('#emailAuthBtn').prop("disabled",true);
					alert('인증번호가 일치합니다!');
					$('#authNo').removeClass("is-invalid");
				}else{
					$('#authNo').addClass("is-invalid");
					alert('인증번호가 일치하지 않습니다');
				}
			});
			
			// 주민등록번호 검증
			$('#memRegno').on('blur',function(){
				var memRegno = $('#memRegno').val();
				if(validateResidentNumber(memRegno)) {
		        	$('#memRegno').removeClass('is-invalid');
			        $('#memRegno').addClass("is-valid");
			    }
			    else if(!validateResidentNumber(memRegno)){
			        $('#memRegno').removeClass('is-valid');
			        $('#memRegno').addClass("is-invalid");
				}
			});
			
			// 전화번호 검증
			$('#memTel').on('blur',function(){
				var memTel = $('#memTel').val();
				if(validatePhoneNumber(memTel)) {
		        	$('#memTel').removeClass('is-invalid');
			        $('#memTel').addClass("is-valid");
			    }
			    else if(!validatePhoneNumber(memTel)){
			        $('#memTel').removeClass('is-valid');
			        $('#memTel').addClass("is-invalid");
				}
			});
			
			$('#memAddress1').on('blur',function(){
				var memAddress1 = $('#memAddress1').val();
				var memAddress2 = $('#memAddress2').val();
				if(memAddress1 == null) {
					$('#memAddress1').removeClass('is-valid');
					$('#memAddress1').addClass('is-invalid');
				}
				if(memAddress1 != null) {
					$('#memAddress1').removeClass('is-invalid');
					$('#memAddress1').addClass('is-valid');
				}
			});
			$('#memAddress2').on('blur',function(){
				var memAddress2 = $('#memAddress2').val();
				if(memAddress2 != null) {
					$('memAddress2').removeClass('is-invalid');
					$('#memAddress2').addClass('is-valid');
				}
				if(memAddress2 == null) {
					$('#memAddress2').removeClass('is-valid');
					$('#memAddress2').addClass('is-invalid');
				}
			});

            // 아이디 중복체크
            $('#checkId').on("click",function(){
				let checkId = $('#memId').val();
				let data = {
						"checkId" : checkId
				};
				$.ajax({
					url : "/public/idChk.do",
					type : "post",
					data : JSON.stringify(data),
					contentType : "application/json; charset=utf-8",
					success : function(result){
						console.log(result);
						if(result === "OK") {
					        $('#memId').removeClass('is-invalid');
					        $('#memId').addClass("is-valid");
					       	$('#valid-id').html("*사용 가능한 아이디입니다 !");
						}
						
						if(result === "FAILED") {
					        $('#memId').removeClass('is-valid');
					        $('#memId').addClass("is-invalid");
							$('#invalid-id').html("*중복된 아이디가 존재합니다 !");
						}
					}
				});
			});

            $('#modifyBtn').on("click",function(){
                alert('수정 클릭함');
            });

        function DaumPostCode() {
        new daum.Postcode(
                {
                    oncomplete : function(data) {
                        // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

                        // 각 주소의 노출 규칙에 따라 주소를 조합한다.
                        // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                        var addr = ''; // 주소 변수
                        var extraAddr = ''; // 참고항목 변수

                        //사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
                        if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
                            addr = data.roadAddress;
                        } else { // 사용자가 지번 주소를 선택했을 경우(J)
                            addr = data.jibunAddress;
                        }

                        // 사용자가 선택한 주소가 도로명 타입일때 참고항목을 조합한다.
                        if (data.userSelectedType === 'R') {
                            // 법정동명이 있을 경우 추가한다. (법정리는 제외)
                            // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
                            if (data.bname !== ''
                                    && /[동|로|가]$/g.test(data.bname)) {
                                extraAddr += data.bname;
                            }
                            // 건물명이 있고, 공동주택일 경우 추가한다.
                            if (data.buildingName !== ''
                                    && data.apartment === 'Y') {
                                extraAddr += (extraAddr !== '' ? ', '
                                        + data.buildingName
                                        : data.buildingName);
                            }
                        }

                        // 우편번호와 주소 정보를 해당 필드에 넣는다.
                        document.getElementById('memPostcode').value = data.zonecode;
                        document.getElementById("memAddress1").value = addr;
                        // 커서를 상세주소 필드로 이동한다.
                        document.getElementById("memAddress2").focus();
                    }
                }).open();
        }

		function getThumbnailName(fileName){
			var front = fileName.substr(0, 12); // 년 월 일 에 해당하는 폴더 경로
			var end = fileName.substr(12);		// 뒤쪽 파일명
			
			console.log(front);
			console.log(end);
			
			return front + "s_" + end;
		}
		
		function checkImageType(fileName){
			//정규식에서 i는 대소문자 구분없음을 나타냄
			var pattern = /jpg|gif|png|jpeg/i;
			return fileName.match(pattern); //패턴과 일치하면 이미지로 판단
		}
    </script>